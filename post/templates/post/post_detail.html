{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="max-w-3xl mx-auto py-8 px-4">
  <div class="flex items-center justify-between mb-6">
    <a href="/" class="text-sm text-gray-600 hover:text-purple-600">&larr; Back to Home</a>
    <span class="text-sm text-gray-400">Post Detail</span>
  </div>

  {% include "card_view.html" with post=post %}
</div>

<div id="image-modal" class="fixed inset-0 bg-black/60 hidden items-center justify-center z-50">
  <div class="relative max-w-4xl mx-auto p-4">
    <button id="close-image-modal"
            class="absolute -top-3 -right-3 bg-white rounded-full w-8 h-8 flex items-center justify-center shadow">
      x
    </button>
    <img id="modal-image" src="" alt="Post image" class="max-h-[80vh] w-auto rounded-lg shadow-lg" />
  </div>
</div>

<script>
function openImageModal(src) {
  const modal = document.getElementById('image-modal');
  const modalImage = document.getElementById('modal-image');
  if (!modal || !modalImage) return;
  modalImage.src = src;
  modal.classList.remove('hidden');
  modal.classList.add('flex');
  document.body.style.overflow = 'hidden';
}

function closeImageModal() {
  const modal = document.getElementById('image-modal');
  if (!modal) return;
  modal.classList.add('hidden');
  modal.classList.remove('flex');
  document.body.style.overflow = '';
}

document.getElementById('close-image-modal')?.addEventListener('click', closeImageModal);
document.getElementById('image-modal')?.addEventListener('click', function(e) {
  if (e.target === this) closeImageModal();
});
</script>
{% endblock %}
