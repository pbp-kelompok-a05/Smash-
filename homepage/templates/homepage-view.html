{% extends 'base.html' %}
{% block content %}
<div style="display:flex;min-height:100vh;">
  <!-- NAV PLACEHOLDER. -->
  <div id="nav-placeholder" style="width:220px;"></div>

  <main style="flex:1;padding:20px;">
    <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
      <input type="text" placeholder="Search..." style="padding:5px 10px;width:50%;">
      {% if user.is_authenticated %}
        <!-- data-target used so link can be swapped later without changing JS logic -->
        <button id="create-btn" data-target="/posts/create/">Create a post</button>
      {% else %}
        <a href="/accounts/">Login</a>
      {% endif %}
    </header>
    <section id="feed"></section>
  </main>
</div>

<!-- JS loader (isi navigasi juga) -->
<script>
(async function(){
  const placeholder = document.getElementById('nav-placeholder');
  if(!placeholder) return;
  try {
    const res = await fetch('/navigasi/');
    if(res.ok){
      const html = await res.text();
      placeholder.innerHTML = html;
      return;
    }
  } catch (err) {
    // silent fail
  }
  placeholder.innerHTML = `<aside style="padding:20px;background:#fafafa;height:100vh;"><h3>Menu</h3><ul style="padding-left:18px;"><li>Recent</li><li>For You</li><li>Hot Thread</li><li>Profile</li></ul></aside>`;
})();
</script>

<script src="/static/home/js/home.js"></script>
{% endblock %}