{% extends 'base.html' %}
{% block content %}
<style>
.card-shadow { box-shadow: 0 6px 20px rgba(13,18,25,.06) }
#premium-success input, #premium-success textarea, #premium-success select {
  border-width: 2px;
  border-color: rgba(148,163,184,.35); 
  outline: none !important;
  transition: border-color .2s ease, box-shadow .2s ease;
}
#premium-success input:focus, #premium-success textarea:focus, #premium-success select:focus {
  border-color: rgb(147 51 234);
  box-shadow: 0 0 0 3px rgba(147,51,234,.25);
}
#premium-success .filled { border-color: rgb(147 51 234) !important; }
.btn-primary { background-color: rgb(147 51 234); color: #fff; }
.btn-primary:hover { background-color: rgb(126 34 206); }
</style>
<div class="bg-gradient-to-b from-white via-emerald-50 to-pink-50 min-h-screen">
  <div id="premium-success" class="max-w-md mx-auto py-12">
    <div class="bg-white rounded-2xl card-shadow p-8">
    <h1 class="text-2xl font-bold text-purple-700 mb-2">Payment Successful</h1>
    <p class="text-gray-600 mb-6">One last step: confirm your email to activate premium.</p>

    {% if saved %}
      <p class="text-green-600 mb-4">Thanks! Your premium will be connected to <span class="font-medium text-gray-700">{{ saved_email }}</span>.</p>
      <a href="/" class="inline-block text-sm underline text-blue-600 hover:text-blue-800">Back to home</a>
    {% else %}
      <form method="post" class="space-y-4">
        {% csrf_token %}
        {{ form.non_field_errors }}
        {{ form.email.errors }}
        {{ form.email }}
        <button class="w-full btn-primary px-4 py-2 rounded-md">Confirm Email</button>
      </form>
    {% endif %}
    </div>
  </div>
</div>
<script>
  (function(){
    const scope = document.getElementById('premium-success');
    if (!scope) return;
    const fields = scope.querySelectorAll('input[type="text"], input[type="email"], input[type="url"], input[type="file"], textarea');
    const setState = (el) => {
      const hasValue = el.type === 'file' ? (el.files && el.files.length>0) : !!el.value;
      el.classList.toggle('filled', hasValue);
    };
    fields.forEach(el=>{
      setState(el);
      el.addEventListener('input', ()=>setState(el));
      el.addEventListener('change', ()=>setState(el));
    });
  })();
</script>

{% endblock %}
